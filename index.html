<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StaxTeam File Sync</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; padding: 30px; }
        .console-card { max-width: 700px; margin: auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.05); }
        .editor { font-family: 'Courier New', monospace; height: 300px; background: #212529; color: #00ff00; }
    </style>
</head>
<body>

<div class="container">
    <div class="console-card">
        <h4 class="mb-4 text-center text-primary">File Manager (Vercel to StaxTeam)</h4>
        
        <div id="status" class="alert d-none"></div>

        <div class="mb-3">
            <label class="form-label fw-bold">File Name:</label>
            <input type="text" id="fileName" class="form-control" value="index.html">
        </div>

        <div class="mb-3">
            <label class="form-label fw-bold">Content:</label>
            <textarea id="fileContent" class="form-control editor"></textarea>
        </div>

        <div class="d-flex gap-2">
            <button onclick="syncFile('write')" id="syncBtn" class="btn btn-primary w-100 fw-bold">Sync to Server</button>
            <button onclick="confirmDelete()" class="btn btn-outline-danger">Delete</button>
        </div>
    </div>
</div>

<script>
    const API_URL = 'https://staxteam.com/manager.php';
    const AUTH_TOKEN = '12345678';

    function showStatus(msg, type) {
        const el = document.getElementById('status');
        el.className = `alert d-block alert-${type}`;
        el.innerText = msg;
    }

    async function syncFile(action) {
        const btn = document.getElementById('syncBtn');
        const fileName = document.getElementById('fileName').value;
        const content = document.getElementById('fileContent').value;

        btn.disabled = true;
        btn.innerText = "Connecting...";

        try {
            const response = await fetch(API_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': AUTH_TOKEN
                },
                body: JSON.stringify({ action, fileName, content })
            });

            const result = await response.json();
            if(result.status === 'success') {
                showStatus(result.message, 'success');
            } else {
                showStatus(result.message, 'danger');
            }
        } catch (err) {
            showStatus("Connection Error: Check CORS settings on manager.php", "danger");
            console.error(err);
        } finally {
            btn.disabled = false;
            btn.innerText = "Sync to Server";
        }
    }

    function confirmDelete() {
        if(confirm("Are you sure you want to delete this file?")) syncFile('delete');
    }
</script>
</body>
</html>
